<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>About - Streak Overlay for Dead by Daylight</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    code { background-color: #f0f0f0; padding: 2px 4px; }
    footer { margin-top: 24px; color: #666; font-size: 12px; }
  </style>
  </head>
<body>
  <h1>About</h1>
  <p>Streak Overlay for Dead by Daylight helps streamers create and manage win-streak overlays.</p>
  <p>OBS setup:</p>
  <ol>
    <li>Add a <strong>Browser Source</strong> with the URL <code id="source-url"></code>.</li>
    <li>Add a <strong>Custom Browser Dock</strong> with the URL <code id="dock-url"></code>.</li>
  </ol>
  <button id="check-updates">Check for updates</button>
  <footer>
    Version: <span id="app-version">loadingâ€¦</span>
  </footer>
  <script>
    document.getElementById('check-updates').addEventListener('click', () => {
      fetch('/api/check-updates', { method: 'POST' })
        .then(r => r.json())
        .then(({ ok, updateAvailable, latestVersion }) => {
          if (!ok) return alert('Failed to check for updates');
          alert(updateAvailable ? `Update available: v${latestVersion}` : 'You are on the latest version.');
        })
        .catch(() => alert('Failed to check for updates'));
    });
    fetch('/version')
      .then(r => r.json())
      .then(({ version }) => {
        document.getElementById('app-version').textContent = version || 'unknown';
      })
      .catch(() => {
        document.getElementById('app-version').textContent = 'unknown';
      });
    const port = location.port;
    document.getElementById('source-url').textContent = `http://localhost:${port}/source.html`;
    document.getElementById('dock-url').textContent = `http://localhost:${port}/dock.html`;
  </script>
</body>
</html>

